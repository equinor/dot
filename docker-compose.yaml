services:
    frontend:
        build:
            context: ./web
            dockerfile: Dockerfile
        depends_on:
            - backend
        environment:
            - REACT_APP_API_BASE_URL=http://localhost:8000/api/

            - WATCHPACK_POLLING=true
        ports:
            - "3000:3000"
        expose:
            - 3000
        networks:
            - app-network

    backend:
        build:
            context: ./api
            dockerfile: Dockerfile
        environment:
            - UVICORN_PORT=8000
            - REACT_APP_WEB_HOST=localhost
            - REACT_APP_WEB_PORT=3000

            - APP_ENVIRONMENT = dev"
        volumes:
            - ./api:/home/api
        ports:
            - "8000:8000"
        expose:
            - 8000
        networks:
            - app-network
networks:
    app-network:
        driver: bridge
